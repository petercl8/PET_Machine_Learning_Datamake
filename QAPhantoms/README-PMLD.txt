This directory contains scripts that generate QA phantoms and masks from the phantoms for ROI analysis (as described by the NEMA standards).

NEMA: NEMA phantom as described by the 2007 standards. The background should have an activity of 1, the two largest (cold) spheres should have activities of 0, and the 4 smallest (hot) spheres should have activities of 4 or 8.
Axial: A modified Defrise phantom. A series of disks in the axial direction to analyze axial distortions.
Radial: Concentric rings to analyze radial distortions.
Pinwheel: A pinwheel filling the FOV to analyze tangential distortions. The centre is empty for better sensitivity along the edges

These are currently made for the FOV of the D690 and would need to be edited for other scanners.

Subdirectories
--------------
CreatePhantoms: Scripts to create each of the 4 phantoms listed above and their STIR .par files.
Masks: Created masks for ROI analysis for each of the phantoms. 
XCAT_phantom: XCAT phantom interfiles to normalize QA phantoms to the same activity. You can create these yourself.
            sample_section_D690: XCAT torso section that fits in the D690 scanner's FOV, for normalization to the section's activity.
            sample_section_mMR: Same as above with the mMR's FOV and z-slice thickness.
            whole_phantom_D690: The whole XCAT phantom with D690 z-slice thickness. Using this resulted in low QA phantom activity values. 

When Mask is on, activity is not normalized to the XCAT phantom slice provided. It's left as the par file/thresholded values.
In the NEMA phantom file, masks are generated by setting a sphere to 1 and the rest to 0. Each sphere can generate a mask (sphere = 1) or a background mask (sphere_background = 1).
In the other phantom files, MaskCold inverts the map (hots become cold and vice versa). This can be used to do cold ROI analysis if you want.

Sampling per voxel should be 1 for sharp edges.
z slices must be the width defined by the scanner, and x-y dimensions should be approx 3 mm so that there are no errors in reconstruction.
VoxNums should be set so that the entire phantom fits inside and is visualized.